{% extends "home/base.html" %}
{% load static %}
{% block content %}
<style>
	.unseen{
		display: none;
		visibility: hidden;
	}
</style>
<script src="{% static 'assets/js/jquery-3.5.1.min.js' %}"></script>
<!-- ============================ Page Title Start================================== -->
<div class="page-title">
	<div class="container">
		<div class="row">
			<div class="col-lg-12 col-md-12">

				<h2 class="ipt-title">Submit Property</h2>
				<span class="ipn-subtitle">Just Submit Your Property</span>

			</div>
		</div>
	</div>
</div>
<!-- ============================ Page Title End ================================== -->

<!-- ============================ Submit Property Start ================================== -->
<section class="gray-simple">

	<div class="container">
		<div class="row">
			<div class="col-lg-12 col-md-12">

				<div class="alert alert-success" role="alert">
					<p>Please sign in before submitting a property so that it may be saved to your profile. If you don't
						have an account you can create one by <a href="{% url 'login' %}">Clicking Here</a></p>
				</div>

			</div>

			<!-- Submit Form -->
			<div class="col-lg-12 col-md-12">

				<div class="submit-page">
					{% csrf_token %}
					<!-- Basic Information -->
					<div class="form-submit">
						<h3>Basic Information </h3>
						<div class="submit-section">
							<div class="row">

								<div class="form-group col-md-12">
									<label>Property Title<span class="tip-topdata" data-tip="Property Title"><i
												class="ti-help"></i></span></label>
									<input type="text" name="title" id="title" class="form-control">
									{{B_form.title.errors}}
								</div>

								<div class="form-group col-md-6">
									<label>Status</label>
									<select id="status" name="status" class="form-control">
										<option value="">&nbsp;</option>
										<option value="For Rent">For Rent</option>
										<option value="For Sale">For Sale</option>
										<option value="Sold">Sold</option>
										<option value="Rented">Rented</option>
									</select>
									{{B_form.status.errors}}
								</div>

								<div class="form-group col-md-6">
									<label>Property Type</label>
									<select id="ptypes type" name="type" class="form-control">
										<option value="">&nbsp;</option>
										<option value="Houses">Houses</option>
										<option value="Apartment">Apartment</option>
										<option value="Villas">Villas</option>
										<option value="Commercial">Commercial</option>
										<option value="Offices">Offices</option>
										<option value="Garage">Garage</option>
									</select>
									{{B_form.type.errors}}
								</div>

								<div class="form-group col-md-6">
									<label>Price</label>
									<input type="number" id="price" name="price" class="form-control" placeholder="USD">
									{{B_form.price.errors}}
								</div>

								<div class="form-group col-md-6">
									<label>Area</label>
									<input type="text" id="area" name="area" class="form-control">
									{{B_form.area.errors}}
								</div>

								<div class="form-group col-md-6">
									<label>Bedrooms</label>
									<select id="bedrooms" name="bedroom" class="form-control">
										<option value="">&nbsp;</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
									{{B_form.bedrooms.errors}}
								</div>

								<div class="form-group col-md-6">
									<label>Bathrooms</label>
									<select id="bathrooms" name="bathroom" class="form-control">
										<option value="">&nbsp;</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
									{{B_form.bathroom.errors}}
								</div>

							</div>
							
						</div>
					
					</div>
					<!-- Gallery -->
					<div class="form-submit">
						<h3>Gallery</h3>
						<div class="submit-section">
							<div class="row">

								<div class="form-group col-md-12">
									<label>Upload Gallery</label>
									<form action="{% url 'upload-view' uid.id %}"
										class="dropzone dz-clickable primary-dropzone">
										{% csrf_token %}
										<div class="dz-default dz-message">
											<i class="ti-gallery"></i>
											<span>Drag & Drop To Change Logo</span>
										</div>
									</form>
								</div>

							</div>
						</div>
					</div>

					<!-- Location -->
					<div class="form-submit">
						<h3>Location </h3>
						<div class="submit-section">
							<div class="row">
								<div class="form-group col-md-6">
										<label>Address</label>
										<select id="address" name="address" class="form-control">
											{% for address in location_address %}
												<option value="{{address.id}}">{{address}}</option>
											{% endfor %}
										</select>
										{{B_form.address.errors}}
									</div>
								</div>

							</div>
						</div>
					</div>

					<!-- Detailed Information -->
					<div class="form-submit">
						<h3>Detailed Information</h3>
						<div class="submit-section">
							<div class="row">

								<div class="form-group col-md-12">
									<label>Description</label>
									<textarea name="description" class="form-control h-120"></textarea>
								</div>

								<div class="form-group col-md-4">
									<label>Building Age (optional)</label>
									<select id="bage" name ="age" class="form-control">
										<option value="">&nbsp;</option>
										<option value="1">0 - 5 Years</option>
										<option value="2">0 - 10Years</option>
										<option value="3">0 - 15 Years</option>
										<option value="4">0 - 20 Years</option>
										<option value="5">20+ Years</option>
									</select>
								</div>

								<div class="form-group col-md-4">
									<label>Garage (optional)</label>
									<select id="garage" name="garage" class="form-control">
										<option value="">&nbsp;</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
								</div>

								<div class="form-group col-md-4">
									<label>Rooms (optional)</label>
									<select id="rooms" name="Room" class="form-control">
										<option value="">&nbsp;</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
								</div>

								<div class="form-group col-md-12">
									<label>Other Features (optional)</label>
									<div class="o-features">
										<ul class="no-ul-list third-row">
											<li>
												<input id="a-1" class="checkbox-custom" name="airCondition" type="checkbox">
												<label for="a-1" class="checkbox-custom-label">Air Condition</label>
											</li>
											<li>
												<input id="a-2" class="checkbox-custom" name="Bedding" type="checkbox">
												<label for="a-2" class="checkbox-custom-label">Bedding</label>
											</li>
											<li>
												<input id="a-3" class="checkbox-custom" name="Heating" type="checkbox">
												<label for="a-3" class="checkbox-custom-label">Heating</label>
											</li>
											<li>
												<input id="a-4" class="checkbox-custom" name="Internet" type="checkbox">
												<label for="a-4" class="checkbox-custom-label">Internet</label>
											</li>
											<li>
												<input id="a-5" class="checkbox-custom" name="Microwave" type="checkbox">
												<label for="a-5" class="checkbox-custom-label">Microwave</label>
											</li>
											<li>
												<input id="a-6" class="checkbox-custom" name="SmokingAllow" type="checkbox">
												<label for="a-6" class="checkbox-custom-label">Smoking Allow</label>
											</li>
											<li>
												<input id="a-7" class="checkbox-custom" name="Terrace" type="checkbox">
												<label for="a-7" class="checkbox-custom-label">Terrace</label>
											</li>
											<li>
												<input id="a-8" class="checkbox-custom" name="Balcony" type="checkbox">
												<label for="a-8" class="checkbox-custom-label">Balcony</label>
											</li>
											<li>
												<input id="a-9" class="checkbox-custom" name="Icon" type="checkbox">
												<label for="a-9" class="checkbox-custom-label">Icon</label>
											</li>
											<li>
												<input id="a-10" class="checkbox-custom" name="Wi_Fi" type="checkbox">
												<label for="a-10" class="checkbox-custom-label">Wi-Fi</label>
											</li>
											<li>
												<input id="a-11" class="checkbox-custom" name="Beach" type="checkbox">
												<label for="a-11" class="checkbox-custom-label">Beach</label>
											</li>
											<li>
												<input id="a-12" class="checkbox-custom" name="Parking" type="checkbox">
												<label for="a-12" class="checkbox-custom-label">Parking</label>
											</li>
										</ul>
									</div>
								</div>
								
							</div>
						</div>
					</div>

	<!-- Detailed Information -->
					<div class="form-submit">
						<h3>Review Property</h3>
						<div class="submit-section">
							<div class="row">

								<div class="form-group col-md-4">
									<label>Service</label>
									<select id="service" name="service" class="form-control">
										<option value="">&nbsp;</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
								</div>

								<div class="form-group col-md-4">
									<label>Value Of Money</label>
									<select id="value_of_money" name="value_of_money" class="form-control">
										<option value="">&nbsp;</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
								</div>
								<div class="form-group col-md-4">
									<label>Location</label>
									<select id="location" name="location" class="form-control">
										<option value="">&nbsp;</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
								</div>
								<div class="form-group col-md-4">
									<label>Cleanliness</label>
									<select id="cleanliness" name="cleanliness" class="form-control">
										<option value="">&nbsp;</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
									</select>
								</div>
							</div>
						</div>
					</div>


					<!-- Contact Information -->
					<div class="form-submit">
						<h3>Contact Information </h3>
						<div class="submit-section">
							<div class="row">

								<div class="form-group col-md-4">
									<label>Name</label>
									<input type="text" name="name" class="form-control">
								</div>

								<div class="form-group col-md-4">
									<label>Email</label>
									<input name="email" type="text" class="form-control">
								</div>

								<div class="form-group col-md-4">
									<label>Phone (optional)</label>
									<input name="phone" type="text" class="form-control">
								</div>

							</div>
						</div>
					</div>

					<div class="form-group col-lg-12 col-md-12">
						<label>GDPR Agreement *</label>
						<ul class="no-ul-list">
							<li>
								<input id="aj-1" class="checkbox-custom" name="gdpr" type="checkbox">
								<label for="aj-1" class="checkbox-custom-label">I consent to having this website store
									my submitted information so they can respond to my inquiry.</label>
							</li>
						</ul>
					</div>

					<div class="form-group col-lg-12 col-md-12">
						<a href="JavaScript:Void(0);" id="SubmitandPreview" data-bs-toggle="modal" data-bs-target="#uploadproperty" class="btn btn-theme-light-2 rounded">Submit & Preview</a>
					</div>

				</div>
			</div>

		</div>
	</div>

</section>
<!-- ============================ Submit Property End ================================== -->
<script type="text/javascript">
	// assume the add author button has an id of add_author_button
	$('#SubmitandPreview').click(function (event) {
		event.preventDefault();
		// assume the text field has an id of author_name
		
		create_Basic();
		create_Location();
		create_Detail();
		create_Contact();
		create_review();

		if($('[name="gdpr"]').prop("checked") == true){
			$('#add_gdpr_button').append(" <img src={% static 'assets\img\checked.png' %} style='height: 20px;' alt=''>");
		}
		else{
			$('#add_gdpr_button').append(" <img src={% static 'assets\img\remove.png' %} style='height: 20px;' alt=''>");
		}
		$('#add_gallery_button').append(" <img src={% static 'assets\img\checked.png' %} style='height: 20px;' alt=''>");
					$('#SubmitandPreview').addClass('disabled');
	}) //<-------- this closing bracket was missing?

	function create_Basic() {
		$.ajax({
			url: "{% url 'submitBasic' uid.id %}", // the endpoint I'll precise that in comment
			type: "POST", // http method
			data: {
				title : $('[name="title"]').val(),
				status : $('[name="status"]').val(),
				type : $('[name="type"]').val(),
				price : $('[name="price"]').val(),
				area : $('[name="area"]').val(),
				bedroom : $('[name="bedroom"]').val(),
				bathroom : $('[name="bathroom"]').val(),
				csrfmiddlewaretoken: $('[name="csrfmiddlewaretoken"]').val()
			},

			// handle a successful response - data will be a json object returned from your view method
			success: function (data) {
				if (data.error === undefined) {
					
					$('#add_basic_button').append(" <img src={% static 'assets\img\checked.png' %} style='height: 20px;' alt=''>");
				} else {
					$('#add_basic_button').append(" <img src={% static 'assets\img\remove.png' %} style='height: 20px;' alt=''>");
					console.log(data.error);
				}
			},
			error: function (xhr, errmsg, err) {
					$('#add_basic_button').append(" <img src={% static 'assets\img\remove.png' %} style='height: 20px;' alt=''>");
				console.log(xhr.status);
					$('#reportstatus').append(" Error "+xhr.status+" : property is invalid. ");
					$('#approve').addClass("unseen");
			}
		});
	}
	function create_Location() {
		$.ajax({
			url: "{% url 'submitLocation' uid.id %}",
			type: "POST",
			data: {
				address : $('[name="address"]').val(),
				csrfmiddlewaretoken: $('[name="csrfmiddlewaretoken"]').val()
			},
			success: function (data) {
				if (data.error === undefined) {
					
					$('#add_location_button').append(" <img src={% static 'assets\img\checked.png' %} style='height: 20px;' alt=''>");
				} else {
					$('#add_location_button').append(" <img src={% static 'assets\img\remove.png' %} style='height: 20px;' alt=''>");
					console.log(data.error);
				}
			},
			error: function (xhr, errmsg, err) {
					$('#add_location_button').append(" <img src={% static 'assets\img\remove.png' %} style='height: 20px;' alt=''>");
				console.log(xhr.status);
			$('#approve').addClass("unseen");
// provide a bit more info about the error to the console
			}
		})
	}
	function create_Detail() {
		$.ajax({
			url : "{% url 'submitDetail' uid.id %}",
			type: "POST",
			data : {
				description : $('[name="description"]').val(),
				age : $('[name="age"]').val(),
				garage : $('[name="garage"]').val(),
				Room : $('[name="Room"]').val(),

				airCondition : $('[name="airCondition"]').prop("checked"),
				Bedding : $('[name="Bedding"]').prop("checked"),
				Heating : $('[name="Heating"]').prop("checked"),
				Internet : $('[name="Internet"]').prop("checked"),
				Microwave : $('[name="Microwave"]').prop("checked"),
				SmokingAllow : $('[name="SmokingAllow"]').prop("checked"),
				Terrace : $('[name="Terrace"]').prop("checked"),
				Balcony : $('[name="Balcony"]').prop("checked"),
				Icon : $('[name="Icon"]').prop("checked"),
				Wi_Fi : $('[name="Wi_Fi"]').prop("checked"),
				Beach : $('[name="Beach"]').prop("checked"),
				Parking : $('[name="Parking"]').prop("checked"),
				Parking : $('[name="Parking"]').prop("checked"),

				csrfmiddlewaretoken: $('[name="csrfmiddlewaretoken"]').val()
				},
				success: function (data) {
				if (data.error === undefined) {
					
					$('#add_detail_button').append(" <img src={% static 'assets\img\checked.png' %} style='height: 20px;' alt=''>");
				} else {
					$('#add_detail_button').append(" <img src={% static 'assets\img\remove.png' %} style='height: 20px;' alt=''>");
					console.log(data.error);
				}
			},
			error: function (xhr, errmsg, err) {
				console.log(xhr.status);
			$('#approve').addClass("unseen");
// provide a bit more info about the error to the console
			}
		})
	}
	function create_Contact() {
		$.ajax({
			url: "{% url 'submitContact' uid.id %}",
			type: "POST",
			data: {
				name : $('[name="name"]').val(),
				email : $('[name="email"]').val(),
				phone : $('[name="phone"]').val(),
				gdpr : $('[name="gdpr"]').prop("checked"),
				csrfmiddlewaretoken: $('[name="csrfmiddlewaretoken"]').val()
			},
			success: function (data) {
				if (data.error === undefined) {
					
					$('#add_contact_button').append(" <img src={% static 'assets\img\checked.png' %} style='height: 20px;' alt=''>");
					
				} else {
					$('#add_contact_button').append(" <img src={% static 'assets\img\checked.png' %} style='height: 20px;' alt=''>");
					console.log(data.error);
				}
			},
			error: function (xhr, errmsg, err) {
						$('#add_gdpr_button').append(" <img src={% static 'assets\img\checked.png' %} style='height: 20px;' alt=''>");
				console.log(xhr.status);
			$('#approve').addClass("unseen");
// provide a bit more info about the error to the console
			}
		})
	}
	function create_review() {
		$.ajax({
			url: "{% url 'submitreview' uid.id %}",
			type: "POST",
			data: {
				service : $('[name="service"]').val(),
				value_of_money : $('[name="value_of_money"]').val(),
				location : $('[name="location"]').val(),
				cleanliness : $('[name="cleanliness"]').val(),
				csrfmiddlewaretoken: $('[name="csrfmiddlewaretoken"]').val()
			},
			success: function (data) {
				if (data.error === undefined) {
					
					$('#add_review_button').append(" <img src={% static 'assets\img\checked.png' %} style='height: 20px;' alt=''>");
				} else {
					$('#add_review_button').append(" <img src={% static 'assets\img\remove.png' %} style='height: 20px;' alt=''>");
					console.log(data.error);
				}
			},
			error: function (xhr, errmsg, err) {
					$('#add_review_button').append(" <img src={% static 'assets\img\remove.png' %} style='height: 20px;' alt=''>");
				console.log(xhr.status);
			$('#approve').addClass("unseen");
// provide a bit more info about the error to the console
			}
		})
	}
</script>
<script src="{% static 'assets/js/dropzone.js' %}"></script>
<!-- Log In Modal -->
<div class="modal fade" id="uploadproperty" tabindex="-1" role="dialog" aria-labelledby="registermodal" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered login-pop-form" role="document">
		<div class="modal-content" id="registermodal">
			<span class="mod-close" data-bs-dismiss="modal" aria-hidden="true"><i class="ti-close"></i></span>
			<div class="modal-body">
				<h5 class="modal-header-title" style="text-align: center;">Property Upload Report</h5>
				<br>
				
				<div class="login-form">
					<ul>
						<li id="reportstatus">
							
						</li>
						<br>
						<li><span id="add_basic_button"></span> Basic Informations  </li>
						<li><span id="add_gallery_button"></span> Gallery </li>
						<li><span id="add_detail_button"></span> Detailed Informations </span></li>
						<li><span id="add_location_button"></span> Location Informations </li>
						<li><span id="add_review_button"></span> Review Informations </li>
						<li><span id="add_contact_button"></span> Contact Informations </li>
						<li><span id="add_gdpr_button"></span> GDPR Informations </li>
					</ul>
				</div>
				<br>
				<div id="approve">
					<div class="row">
						<a href="{% url 'approved_add_home' uid.id %}" class="btn btn-theme-2 col" style="align-self: center;padding: 10px 0px;  margin:0 10px;">Approve and go to homepage</a>
					</div>
					<br>
					<div class="row">
						<a href="{% url 'approved_add_property' uid.id %}" class="btn btn-theme col" style="align-self: center;padding: 10px 5px; margin: 0 10px;">Approve and Add another</a>
					</div>
				</div>
				<br>
				<div id="delete">
					<div class="row">
						<a href="{% url 'delete_home_property' uid.id %}" class="btn btn-danger col" style="align-self: center;padding: 10px 5px; margin: 0 10px;">Delete and Add go to homepage</a>
					</div>
					<br>
					<div class="row">
						<a href="{% url 'delete_add_property' uid.id %}" class="btn btn-danger col" style="align-self: center;padding: 10px 5px; margin: 0 10px;">Delete and Add another Property</a>
					</div>
				</div>
				
			<br>
			<small>
				<i style="
				color: #fff;
				text-decoration: none;
				width: 15px;
				height: 15px;
				display: inline-block;
				background: #394d8c;
				border-radius: 50%;
				text-align: center;
				line-height: 19px;
				margin-left: 5px;
				font-size: 9px;
				block-size: auto;
				" class="ti-help"></i> Note: If all informations are not met, the property will not be uploaded.
			</small>
			</div>
		</div>
	</div>
</div>
<!-- End Modal -->
{% endblock content %}